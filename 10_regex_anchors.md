# 정규 표현식의 앵커 문자

## 앵커의 필요성
지금까지 우리는 텍스트 내에서 패턴이 부분적으로 일치하는 부분을 찾아왔습니다. 그러나 현실 세계의 데이터 처리에서는 이러한 부분 매칭이 항상 바람직하지는 않습니다. 예를 들어 로그 파일에서 "success"라는 단어를 찾고자 할 때, "Error: unsuccessful operation"과 같은 줄까지 매칭되면 문제가 됩니다. 따라서 실제 텍스트를 처리할 때는 오탐(false positive)을 방지하기 위해 가능한 한 정확한 정규 표현식을 작성하는 것이 좋습니다.

## 앵커 메타문자 소개
정규 표현식에서는 두 가지 주요 앵커 메타문자가 있습니다:

### ^ (캐럿/hat) - 문자열 시작
- **^**: 문자열 또는 줄의 **시작 위치**를 나타냅니다
- **^pattern**: 문자열이 pattern으로 시작해야 함을 의미합니다
- 예: **^Hello**는 "Hello World"와 매칭되지만 "Say Hello"와는 매칭되지 않습니다

### $ (달러 기호/dollar sign) - 문자열 끝
- **$**: 문자열 또는 줄의 **끝 위치**를 나타냅니다
- **pattern$**: 문자열이 pattern으로 끝나야 함을 의미합니다
- 예: **World$**는 "Hello World"와 매칭되지만 "World News"와는 매칭되지 않습니다

## 앵커 사용의 이점
앵커를 사용하면 패턴 매칭의 정확도를 크게 높일 수 있습니다:

1. **부분 매칭 방지**: 원하지 않는 부분 매칭을 피할 수 있습니다
2. **오탐(false positives) 감소**: 비슷한 패턴을 포함하지만 다른 의미를 갖는 문자열을 걸러냅니다
3. **완전 매칭 확인**: 문자열이 전체적으로 원하는 형식을 따르는지 확인할 수 있습니다

## ^와 $ 함께 사용하기
두 앵커를 함께 사용하면 문자열 전체가 패턴과 정확히 일치해야 함을 지정할 수 있습니다:

### 전체 문자열 매칭
- **^pattern$**: 문자열 전체가 pattern과 정확히 일치해야 함
- 예: **^success$**는 "success" 문자열과는 매칭되지만, "successful"이나 "to succeed"와는 매칭되지 않습니다

## 앵커와 다른 패턴의 조합

### 시작 위치와 다른 패턴
- **^\d+**: 숫자로 시작하는 줄 매칭
- **^From:**: 이메일 헤더에서 발신자 정보가 있는 줄 매칭
- **^#**: 주석 줄(#으로 시작) 매칭

### 끝 위치와 다른 패턴
- **\d+$**: 숫자로 끝나는 줄 매칭
- **\.jpg$**: .jpg로 끝나는 파일명 매칭
- **[.!?]$**: 문장 부호로 끝나는 문장 매칭

### 전체 문자열 패턴
- **^\d{3}-\d{2}-\d{4}$**: 미국 사회보장번호 형식(###-##-####) 검증
- **^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}$**: 이메일 형식 검증
- **^https?://[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(/.*)?$**: URL 형식 검증

## 앵커 문자와 문자 클래스 구분하기

### 중요한 차이점
- **^** (앵커): 대괄호([]) 밖에서 사용될 때는 문자열/줄의 시작을 의미
- **[^...]** (제외): 대괄호 안에서 첫 위치에 사용될 때는 문자 집합 제외를 의미
- 예: **^[^0-9]** - 숫자가 아닌 문자로 시작하는 줄 (첫 ^는 앵커, 두 번째 ^는 제외)
- 이 차이점을 인식하는 것은 정규 표현식을 읽을 때 혼란을 방지하는 데 중요합니다

## 멀티라인 모드
일부 정규 표현식 엔진에서는 멀티라인 모드를 지원합니다:

- **일반 모드**: ^와 $는 전체 문자열의 시작과 끝만 매칭
- **멀티라인 모드**: ^와 $가 각 줄의 시작과 끝을 매칭 (줄바꿈 문자 \n 기준)

## 실용적인 예시

### 파일 처리
- **^#include**: C/C++ 파일에서 include 구문 찾기
- **^[\s]*$**: 빈 줄 찾기 (공백만 있는 줄 포함)
- **^ERROR:**: 로그 파일에서 오류 메시지 찾기

### 데이터 검증
- **^[A-Z][a-z]+$**: 첫 글자가 대문자로 시작하는 단어 검증
- **^\d{3}-\d{3,4}-\d{4}$**: 전화번호 형식 검증
- **^(19|20)\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$**: 날짜 형식(YYYY-MM-DD) 검증

### 프로그래밍 언어에서의 활용
- **^(public|private|protected)**: Java 메소드 접근 제어자 찾기
- **^function**: JavaScript 함수 선언 찾기
- **^class\s+\w+**: 클래스 정의 찾기

## 실습 예제
1. "success"로 시작하는 줄 매칭: `^success`
2. "completed"로 끝나는 줄 매칭: `completed$`
3. 정확히 "OK"라는 단어만 포함하는 줄 매칭: `^OK$`
4. "Error"로 시작하고 마침표로 끝나는 줄 매칭: `^Error.*\.$`

## 주의사항
1. 일부 정규 표현식 엔진에서는 앵커의 동작이 다를 수 있습니다
2. 멀티라인 텍스트에서는 모드 설정이 앵커의 동작에 영향을 줍니다
3. 앵커 자체는 문자와 매칭되지 않으며, 위치만을 나타냅니다

