# 정규 표현식의 캡처 그룹과 문자 집합 비교

## 개요
정규 표현식에서 소괄호`()`와 대괄호`[]`는 자주 사용되는 요소이지만 완전히 다른 기능을 수행합니다. 이 두 개념을 정확히 이해하고 구분하는 것은 효과적인 정규 표현식 패턴 작성에 매우 중요합니다.

## 캡처 그룹 (Capturing Groups): (...)

### 캡처 그룹의 목적
1. **그룹화(Grouping)**: 여러 문자나 패턴을 하나의 단위로 묶어서 처리합니다.
2. **캡처(Capturing)**: 괄호 안의 패턴과 일치하는 부분을 별도로 저장하여 나중에 참조할 수 있습니다.
3. **수량자 적용**: 그룹 전체에 *, +, ?, {m,n} 등의 수량자를 적용할 수 있습니다.

### 캡처 그룹 사용 예시

#### 기본 그룹화 및 캡처
- **(ab)+**: "ab", "abab", "ababab" 등과 매칭됩니다. "ab" 전체가 하나의 단위로 반복됩니다.
  - "ab"가 매칭되면, 그룹 1에 "ab"가 캡처됩니다.
  - "ababab"가 매칭되면, 그룹 1에 "ababab"가 캡처됩니다.

#### 복수 그룹 캡처
- **(\d{3})-(\d{3}-\d{4})**: 전화번호를 매칭하고, 지역 번호와 나머지 부분을 각각 별도의 그룹으로 캡처합니다.
  - "123-456-7890"이 매칭되면, 그룹 1은 "123", 그룹 2는 "456-7890"이 됩니다.

#### 비캡처 그룹
- **(?:https?)://([\w.-]+)**: "http://" 또는 "https://"로 시작하는 URL을 매칭하지만, 프로토콜 부분은 캡처하지 않고 도메인 부분만 캡처합니다.
  - "https://example.com"이 매칭되면, 그룹 1에 "example.com"만 캡처됩니다.

## 문자 집합 (Character Sets): [...]

### 문자 집합의 목적
1. **문자 선택(Character Selection)**: 대괄호 안에 나열된 문자 중 하나와 매칭됩니다.
2. **범위 지정(Range Specification)**: 하이픈(-)을 사용하여 연속된 문자 범위를 지정할 수 있습니다.
3. **제외(Negation)**: 캐럿(^)을 맨 앞에 사용하면 나열된 문자를 제외한 모든 문자와 매칭됩니다.

### 문자 집합 사용 예시

#### 기본 문자 집합
- **[abc]**: "a", "b", "c" 중 한 문자와 매칭됩니다.
  - "apple"은 "a"와 매칭됩니다.
  - "block"은 "b"와 매칭됩니다.
  - "cat"은 "c"와 매칭됩니다.
  - "dog"는 매칭되지 않습니다.

#### 범위를 사용한 문자 집합
- **[a-z]**: 모든 소문자 알파벳 중 한 문자와 매칭됩니다.
- **[0-9]**: 모든 숫자 중 한 문자와 매칭됩니다(이는 `\d`와 동일합니다).
- **[a-zA-Z0-9]**: 모든 영숫자 중 한 문자와 매칭됩니다(이는 일부 언어의 `\w`와 유사합니다).

#### 제외를 사용한 문자 집합
- **[^0-9]**: 숫자를 제외한 모든 문자와 매칭됩니다(이는 `\D`와 동일합니다).
- **[^aeiou]**: 모음을 제외한 모든 문자와 매칭됩니다.

## 핵심 차이점 비교

### 1. 매칭 대상
- **캡처 그룹(...)**: 괄호 안의 패턴 전체와 매칭됩니다. 여러 문자를 하나의 단위로 처리합니다.
- **문자 집합[...]**: 대괄호 안의 문자 중 하나와 매칭됩니다. 항상 단일 문자만 매칭합니다.

### 2. 캡처 여부
- **캡처 그룹(...)**: 기본적으로 매칭된 내용을 캡처합니다(비캡처 문법 (?:...)을 사용하지 않는 한).
- **문자 집합[...]**: 매칭된 내용을 캡처하지 않습니다.

### 3. 수량자 적용
- **캡처 그룹(...)**: 그룹 전체에 수량자를 적용할 수 있습니다. 예: `(abc)+`는 "abc", "abcabc" 등과 매칭됩니다.
- **문자 집합[...]**: 문자 집합 자체에 수량자를 적용하면 해당 집합에서 한 문자가 반복됩니다. 예: `[abc]+`는 "a", "ab", "cab" 등과 매칭됩니다.

### 4. 기능적 용도
- **캡처 그룹(...)**: 패턴의 일부를 묶어서 반복하거나, 매칭된 텍스트를 추출하거나, 역참조에 사용합니다.
- **문자 집합[...]**: 특정 위치에서 허용되는 문자의 집합을 정의합니다.

## 실제 응용 비교 예시

### 전화번호 매칭 패턴
```
(\d{3})-(\d{3})-(\d{4})
```
- 이 패턴은 "123-456-7890"과 같은 전화번호를 매칭합니다.
- 세 부분(지역 코드, 국번, 개인 번호)이 각각 별도의 그룹으로 캡처됩니다.
- 그룹 1: "123", 그룹 2: "456", 그룹 3: "7890"

### 영숫자 문자 매칭 패턴
```
[a-zA-Z0-9]
```
- 이 패턴은 단일 영숫자 문자를 매칭합니다("a", "B", "7" 등).
- 매칭된 문자는 캡처되지 않습니다.
- 수량자를 추가하면: `[a-zA-Z0-9]+`는 연속된 영숫자 문자열을 매칭합니다.

## 조합 사용의 예

### 이메일 주소 매칭
```
([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})
```
- 첫 번째 캡처 그룹 `([a-zA-Z0-9._%+-]+)`는 @ 앞의 사용자 이름 부분을 캡처합니다.
- 두 번째 캡처 그룹 `([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})`는 도메인 부분을 캡처합니다.
- `[a-zA-Z0-9._%+-]`와 `[a-zA-Z0-9.-]`는 각각 사용자 이름과 도메인에 허용되는 문자를 지정하는 문자 집합입니다.
- `[a-zA-Z]`는 최상위 도메인에 허용되는 문자를 지정하는 문자 집합입니다.

### URL 매칭
```
(https?):\/\/(www\.)?([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[a-zA-Z0-9%&=_\-\+\/\.]*)?
```
- `(https?)` - 프로토콜 부분을 캡처 (http 또는 https)
- `(www\.)?` - 'www.' 부분은 선택적이며, 캡처됨
- `([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})` - 도메인 이름 캡처
- `(\/[a-zA-Z0-9%&=_\-\+\/\.]*)?` - URL 경로 부분 선택적 캡처
- `[a-zA-Z0-9.-]` 및 `[a-zA-Z]`는 도메인에 허용되는 문자를 지정
- `[a-zA-Z0-9%&=_\-\+\/\.]`는 경로에 허용되는 문자를 지정

## 정리

캡처 그룹과 문자 집합은 정규 표현식에서 가장 많이 사용되는 두 가지 기능으로, 서로 완전히 다른 목적을 가지고 있습니다. 

- **캡처 그룹(...)** 은 여러 문자를 묶어 하나의 단위로 처리하고, 해당 부분을 캡처하여 추후 참조할 수 있게 합니다.
- **문자 집합[...]** 은 특정 위치에서 허용되는 단일 문자의 집합을 정의합니다.

두 개념을 정확히 이해하고 구분하면 더 효과적인 정규 표현식을 작성할 수 있습니다. 이 두 기능은 개별적으로도 강력하지만, 함께 사용할 때 가장 유용합니다.
