# 정규 표현식의 고급 그룹 활용법

## 캡처 그룹과 수량자 결합
정규 표현식에서 강력한 기능 중 하나는 캡처 그룹과 다양한 수량자를 결합하여 사용하는 것입니다. 이를 통해 개별 문자가 아닌 문자 시퀀스(여러 문자로 구성된 패턴)에 수량자를 적용할 수 있습니다.

## 그룹에 수량자 적용하기
모든 수량자(*, +, ?, {m,n})는 문자 하나가 아닌 그룹 전체에 적용할 수 있습니다.

### 기본 구문
- **(패턴)****: 패턴이 0번 이상 반복
- **(패턴)+**: 패턴이 1번 이상 반복
- **(패턴)?**: 패턴이 0번 또는 1번 출현 (패턴 전체가 선택적)
- **(패턴){m,n}**: 패턴이 최소 m번, 최대 n번 반복

### 단일 문자 vs. 그룹 수량자 차이
- **a{3}**: 'a' 문자가 정확히 3번 반복 ("aaa")
- **(abc){3}**: 'abc' 패턴이 정확히 3번 반복 ("abcabcabc")

### 문자 수량자와 그룹 수량자의 비교
- **\d?**: 하나의 숫자가 선택적 ("1" 또는 "")
- **(\d{3})?**: 3자리 숫자 그룹 전체가 선택적 ("123" 또는 "")
- **\d{3}?**: 3자리 숫자지만 마지막 숫자는 선택적 (이는 혼란을 줄 수 있는 패턴)

## 실제 활용 예시

### 전화번호 패턴
- **(\(\d{3}\))?\s*\d{3,4}-\d{4}**: 지역 번호가 선택적인 전화번호 패턴
  - 매칭: "(010) 1234-5678" 또는 "1234-5678"
  - 여기서 `(\(\d{3}\))?`는 괄호로 둘러싸인 3자리 지역번호 전체가 선택적

### 날짜 형식 처리
- **(\d{4}-)?(\d{2})-(\d{2})**: 연도 부분이 선택적인 날짜 형식
  - 매칭: "2023-11-15" 또는 "11-15"
  - `(\d{4}-)?`는 연도와 하이픈 전체가 있거나 없을 수 있음

### URL 구성요소
- **https?://(www\.)?example\.com**: www 부분이 선택적인 URL
  - 매칭: "https://www.example.com" 또는 "http://example.com"
  - `(www\.)?`는 "www." 전체가 선택적

## 비캡처 그룹(Non-capturing Groups)
정규 표현식에서는 그룹화는 필요하지만 캡처는 필요하지 않을 때 비캡처 그룹을 사용할 수 있습니다.

### 비캡처 그룹 문법
- **(?:패턴)**: 그룹화만 하고 캡처는 하지 않음
- 일반 캡처 그룹과 동일하게 작동하지만, 결과에서 별도의 그룹으로 보관되지 않음

### 비캡처 그룹 사용의 이점
1. **성능 향상**: 많은 그룹이 있을 때 필요한 부분만 캡처하여 효율성 증가
2. **코드 간결화**: 캡처 결과를 처리할 때 불필요한 그룹 관리 불필요
3. **가독성 향상**: 실제로 필요한 캡처 그룹만 명확히 표시

### 비캡처 그룹 예시
- **(?:\d{3})-(\d{4})**: 앞의 3자리는 그룹화만 하고 뒤의 4자리만 캡처
  - "123-4567"에서 "4567"만 캡처 결과로 저장
- **(?:https?|ftp)://([\w.-]+)**: 프로토콜 부분은 그룹화만 하고 도메인만 캡처
  - "https://example.com"에서 "example.com"만 캡처

## 혼합 패턴: 캡처와 비캡처 그룹

### 실용적 혼합 예시
- **(?:\d{3}-)?((?:\d{3}-)?(\d{4}))**: 선택적 지역 번호, 선택적 국번, 필수 끝 자리
  - "123-456-7890"에서 "456-7890"과 "7890"이 캡처됨
  - "456-7890"에서 "456-7890"과 "7890"이 캡처됨
  - "7890"에서 "7890"과 "7890"이 캡처됨

## 그룹 내 대체(Alternation) 사용
그룹 내에서 파이프(|) 문자를 사용하여 대체 패턴을 지정할 수 있습니다.

### 기본 구문
- **(패턴1|패턴2|패턴3)**: 패턴1, 패턴2, 패턴3 중 하나와 일치하는 경우를 캡처

### 대체 패턴 예시
- **(jpg|png|gif)**: 이미지 파일 확장자 매칭
  - "image.jpg", "image.png", "image.gif" 등과 매칭
- **(https?|ftp)://([\w.-]+)**: 다양한 프로토콜 매칭
  - "http://", "https://", "ftp://" 다음에 도메인이 오는 URL 매칭

## 화면 해상도 추출 예제
화면 해상도(예: "1920x1080", "1280x720")에서 너비와 높이를 추출하는 패턴:

### 해상도 패턴
- **(\d+)x(\d+)**: 너비와 높이를 각각 캡처
  - "1920x1080"에서 "1920"(너비)과 "1080"(높이)를 캡처
  - "1280x720"에서 "1280"(너비)과 "720"(높이)를 캡처

### 확장된 해상도 패턴
- **(\d+)x(\d+)(?:@(\d+)Hz)?**: 너비, 높이, 선택적 주사율 캡처
  - "1920x1080"에서 "1920"과 "1080"을 캡처
  - "1920x1080@144Hz"에서 "1920", "1080", "144"를 캡처

## 기술 명세 추출
기술 명세나 규격에서 정보 추출할 때 그룹과 수량자를 조합하여 사용할 수 있습니다.

### 예: 메모리 규격
- **(\d+)(?:GB|MB|KB) (DDR(\d))**: 용량, 메모리 유형, DDR 버전 추출
  - "8GB DDR4"에서 "8", "DDR4", "4"를 캡처
  - "16GB DDR3"에서 "16", "DDR3", "3"을 캡처

### 예: 노트북 모델
- **(ThinkPad) (X|T|P)(\d{2,3})(?:[se])?**: 브랜드, 시리즈, 모델 번호 추출
  - "ThinkPad X1"에서 "ThinkPad", "X", "1"을 캡처
  - "ThinkPad T480s"에서 "ThinkPad", "T", "480"을 캡처 ('s'는 캡처하지 않음)

## 실습 예제
다음 패턴을 작성하고 그룹화와 수량자 결합의 효과를 확인해 보세요:

1. IP 주소 형식 매칭과 각 섹션 추출:
   - `(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})`
   - 예: "192.168.1.1"에서 "192", "168", "1", "1" 캡처

2. 선택적 프로토콜과 www가 있는 URL 매칭:
   - `(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+\.[a-zA-Z]{2,})\/?(.*)?`
   - 예: "https://www.example.com/path"에서 "example.com", "path" 캡처

3. 다양한 CSS 색상 코드 매칭:
   - `#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6})`
   - 예: "#fff" 또는 "#f0f0f0"와 매칭 (캡처 없음)

## 주의사항
1. 그룹과 수량자를 함께 사용할 때는 의도한 대로 동작하는지 주의 깊게 테스트해야 합니다
2. 비캡처 그룹은 캡처가 필요하지 않은 그룹화에만 사용하세요
3. 너무 복잡한 패턴은 가독성을 해치므로 가능하면 간결하게 유지하세요
